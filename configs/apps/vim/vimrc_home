filetype off

call pathogen#infect('~/.vim/bundle/{}')
call pathogen#helptags()
call pathogen#incubate()

filetype plugin indent on
syntax on

set number
set hlsearch

colorscheme desert

nmap <C-Right> :tabnext<CR>
nmap <C-Left> :tabprev<CR>
nmap gn :tabnew<CR>
" nmap <C-x> :quit<CR>

"nmap <C-W><Left> :vertical resize -5<cr>
"nmap <C-W><Down> :resize -5<cr>
"nmap <C-W><Up> :resize +5<cr>
"nmap <C-W><Right> :vertical resize +5<cr>

function! s:ExecuteInShell(command)
	let command = join(map(split(a:command), 'expand(v:val)'))
	let winnr = bufwinnr('^' . command . '$')
	silent! execute  winnr < 0 ? 'botright new ' . fnameescape(command) : winnr . 'wincmd w'
	setlocal buftype=nowrite bufhidden=wipe nobuflisted noswapfile nowrap number
	echo 'Execute ' . command . '...'
	silent! execute 'silent %!'. command
	silent! execute 'resize ' . line('$')
	silent! redraw
	silent! execute 'au BufUnload <buffer> execute bufwinnr(' . bufnr('#') . ') . ''wincmd w'''
	silent! execute 'nnoremap <silent> <buffer> <LocalLeader>r :call <SID>ExecuteInShell(''' . command . ''')<CR>'
	echo 'Shell command ' . command . ' executed.'
endfunction

command! -complete=shellcmd -nargs=+ Shell call s:ExecuteInShell(<q-args>)

set title
set switchbuf=newtab
set shiftwidth=4 softtabstop=4 expandtab
set cursorline

"#################### Taglist ####################
nnoremap <Leader>tl :TlistToggle<CR>
let Tlist_Show_One_File = 1

"#################### NERDTree ####################
nmap <Leader>fl :NERDTree<CR>
